# [题目](https://leetcode-cn.com/problems/airplane-seat-assignment-probability/)

有 `n` 位乘客即将登机，飞机正好有 `n` 个座位。第一位乘客的票丢了，他随便选了一个座位坐下。

剩下的乘客将会：

- 如果他们自己的座位还空着，就坐到自己的座位上，
- 当他们自己的座位被占用时，随机选择其他座位

第 `n` 位乘客坐在自己的座位上的概率是多少？

**示例 1：**

```
输入：n = 1
输出：1.00000
解释：第一个人只会坐在自己的位置上。
```

**示例 2：**

```
输入: n = 2
输出: 0.50000
解释：在第一个人选好座位坐下后，第二个人坐在自己的座位上的概率是 0.5。
```

**提示：**

- 1 <= n <= 10^5

# 解答

## 方法一： 数学归纳法

设第 `n` 位乘客坐在自己的座位上的概率是`p(n)`，由示例可知，`n=1`时，`p(n)=1`；`n=2`时，`p(n)=0.5`。当`n>2`时，分情况讨论如下：

第`1`个乘客有三种选择：

1. 坐在自己的位置， 那么后面的乘客都不会乱，第n个乘客必然坐到自己的位置，其概率为 $1/n$。
2. 坐在第n个乘客的位置，那么第n个乘客肯定无法坐到自己的位置,，其概率为$1/n$ 。
3. 坐在`[1,n-1]`之间的某个位置，记为第`k`个座位。则对于第k个乘客而言，自己的位置`k`已经被第一个乘客占了，而`[2，K-1]`的乘客先于`k`乘客 上飞机，能找到自己的位置并坐下，所以当`k`乘客上飞机时，留给他的选择是第`1`个和`[K+1,n]`的座位，其概率为$(n-2)/n$。

此时`k`乘客同样有如下3个选择：

1. 如果他坐在座位`1`，那么后面的乘客都不会乱，第n个乘客可以坐到自己的位置，其条件概率为$1/(n-k+1)$。
2. 坐在第n个乘客的位置，那么第n个乘客肯定无法坐到自己的位置，其条件概率为$1/(n-k+1)$。
3. 坐在`[K+1,n-1]`之间的某个位置，其条件概率为$(n-k-1)/(n-k+1)$。

依次类推……

可以发现对于第`1`个乘客和第`k`个乘客，他们面对的问题是一样的，只是规模不一样。对于第`k`个乘客，问题的规模只有`n-k+1`。

所以计算公式可归纳如下：

```
p(1) = 1.0
p(2) = 0.5
p(3) = p(3)/3 + 1/3 = 0.5
……
p(k) = p(k-1）/k + p(k-2)/k + …… + p(1)/k = [0.5(k-2)+1]/k = 0.5
……
```

代码如下：

```python
# Python

class Solution(object):
    def nthPersonGetsNthSeat(self, n):
        """
        :type n: int
        :rtype: float
        """
        if n == 1:
            return 1
        else:
            return 0.5
```

